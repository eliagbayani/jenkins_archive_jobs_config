<?xml version='1.1' encoding='UTF-8'?>
<project>
  <actions/>
  <description></description>
  <keepDependencies>false</keepDependencies>
  <properties>
    <jenkins.model.BuildDiscarderProperty>
      <strategy class="hudson.tasks.LogRotator">
        <daysToKeep>-1</daysToKeep>
        <numToKeep>5</numToKeep>
        <artifactDaysToKeep>-1</artifactDaysToKeep>
        <artifactNumToKeep>-1</artifactNumToKeep>
      </strategy>
    </jenkins.model.BuildDiscarderProperty>
  </properties>
  <scm class="hudson.scm.NullSCM"/>
  <canRoam>true</canRoam>
  <disabled>false</disabled>
  <blockBuildWhenDownstreamBuilding>false</blockBuildWhenDownstreamBuilding>
  <blockBuildWhenUpstreamBuilding>false</blockBuildWhenUpstreamBuilding>
  <triggers>
    <hudson.triggers.TimerTrigger>
      <spec>### will run every 1st day of the month at 1AM
H H(1-1) 1 1-12 *
### temporarily stopped


#TODO: works okay but we need to run only every friday
</spec>
    </hudson.triggers.TimerTrigger>
  </triggers>
  <concurrentBuild>false</concurrentBuild>
  <builders>
    <hudson.tasks.Shell>
      <command># temporarily commented due to some reason it should not run as scheduled
#exit 1

# working OK
cd /extra/dumps/wikidata
rm -f latest-all.json.gz
wget -c https://dumps.wikimedia.org/wikidatawiki/entities/latest-all.json.gz
# ORIG - this works OK but triggers FAILURE even on a successful decompression.
gunzip -fk latest-all.json.gz #-k means keep, don&apos;t delete orig file. -f means overwrites.


### =========================================================================
### another option is to use the bz2 download bec. its decompression
### doesn&apos;t give a FAILURE signal on a successful decompression.

### the bz2 version is much bigger json file. Will not use it.

##cd /extra/dumps/wikidata
##wget -c https://dumps.wikimedia.org/wikidatawiki/entities/latest-all.json.bz2
##bzip2 -dkf latest-all.json.bz2
##exit 1



### history - all failed below: ============================================

#let us try this: still gives FAILURE even if success
#gzip -dfk latest-all.json.gz

#another try: still gives FAILURE even if success
#gzip -dfkq latest-all.json.gz

#another try: still FAILURE
#gunzip -fk /extra/dumps/wikidata/latest-all.json.gz

#another try: still fails :-(
#gzip -dfkq /extra/dumps/wikidata/latest-all.json.gz


</command>
    </hudson.tasks.Shell>
    <sp.sd.fileoperations.FileOperationsBuilder plugin="file-operations@1.7">
      <fileOperations/>
    </sp.sd.fileoperations.FileOperationsBuilder>
  </builders>
  <publishers>
    <hudson.tasks.BuildTrigger>
      <childProjects>02 Wikimedia Dump</childProjects>
      <threshold>
        <name>SUCCESS</name>
        <ordinal>0</ordinal>
        <color>BLUE</color>
        <completeBuild>true</completeBuild>
      </threshold>
    </hudson.tasks.BuildTrigger>
  </publishers>
  <buildWrappers/>
</project>